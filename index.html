<!-- npm i -g five-server@latest && five-server --port=8000 -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Curtin Exhibition Space</title>
    <meta name="description" content="Curtin Exhibition Space">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-enviropacks@0.10.0/aframe-enviropacks.js"></script>
    <script src="js/highlight.js"></script>
    <script src="js/info-panel.js"></script>
    <script src="js/joystick.js"></script>
  </head>
  
  <body>
  
    
    <a-scene 
      renderer="colorManagement: true;" 
      info-message="htmlSrc: #messageText"
      loading-screen="dotsColor: white; backgroundColor: black">
      
      
      <a-assets>
        <a-entity enviropack="preset: tankfarm"></a-entity>
        
        
        <!-- Exhibition Space  -->
        <a-asset-item id="exhibition_space" src="src/mesh/exhibition_space_2.glb"></a-asset-item>
        <a-asset-item id="exhibition_glass" src="src/mesh/exhibition_glass.glb"></a-asset-item>
        <a-asset-item id="exhibition_scaffolding" src="src/mesh/exhibition_scaffolding.glb"></a-asset-item>

        <!-- Nav Mesh -->
        <a-asset-item id="exhibition_navmesh" src="src/mesh/exhibition_navmesh.glb"></a-asset-item>

        <!-- -->
       <a-asset-item id="garment_1" src="src/mesh/g1.glb"></a-asset-item> 


        <a-asset-item id="messageText" src="message.html"></a-asset-item>
        <!--
          Image source: http://www.ghibli.jp/works/kazetachinu/#frame&gid=1&pid=1
          Image author: Studio Ghibli
        -->
        <img id="howard" src="src/img/howard.PNG" crossorigin="anonymous"/>
        <img id="howardPoster" src="src/img/howard-riley.jpg" crossorigin="anonymous"/>
     
        <img id="ponyo" src="https://cdn.aframe.io/examples/ui/ponyo.jpg" crossorigin="anonymous"/>
        <img id="ponyoPoster" src="https://cdn.aframe.io/examples/ui/ponyoPoster.jpg" crossorigin="anonymous"/>
      
        <img id="karigurashi" src="https://cdn.aframe.io/examples/ui/karigurashi.jpg" crossorigin="anonymous"/>
        <img id="karigurashiPoster" src="https://cdn.aframe.io/examples/ui/karigurashiPoster.jpg" crossorigin="anonymous"/>
        <a-mixin
          id="frame"
          geometry="primitive: plane; width: 0.5783552; height: 0.8192"
          material="color: white; shader: flat"
          animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
          animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
         ></a-mixin>
         <a-mixin
          id="poster"
          geometry="primitive: plane; width: 0.544768; height: 0.786432"
          material="color: white; shader: flat"
          material="shader: flat"
          position="0 0 0.005"
         ></a-mixin>
         <a-mixin
          id="Image"
          geometry="primitive: plane; width: 1.5; height: 0.81"
          material="src: #ponyo; shader: flat; transparent: true"
          position="0 0.495 0.002"
         ></a-mixin>
      </a-assets>


      <a-entity gltf-model="#exhibition_space" material="shader: flat;" renderer="colorManagement: true;" position="0 -1.525 0"></a-entity>
      <a-entity gltf-model="#exhibition_scaffolding" material=" color: #032225;" renderer="colorManagement: true;" position="0 -1.525 0"></a-entity>
      <a-entity nav-mesh="" normal-material="" visible="false" position="0 -1.525 0" gltf-model="#exhibition_navmesh"></a-entity>
      <a-entity gltf-model="#exhibition_glass" material="opacity:0.5; transparent: true;" position="0 -1.525 0"></a-entity>
      <a-entity gltf-model="#garment_1" material="shader: flat;" renderer="colorManagement: true;" position="4.362 1.236 -4.045"></a-entity>


      <a-entity
        id="background"
        position="0 0 0"
        geometry="primitive: sphere; radius: 2.0"
        material="color: red; side: back; shader: flat"
        scale="0.001 0.001 0.001"
        visible="false" class="raycastable">
      </a-entity>

      <a-entity id="rig" 
        movement-controls="constrainToNavMesh: true; controls: checkpoint, trackpad, keyboard;"
        position=""
        rotation=""
        keyboard-controls=""
        universal-controls="movementControls: checkpoint"
        checkpoint-controls="mode: animate"
        >
          <a-entity 
            camera 
            id="camera" 
            camera 
            position="0 1.6 0" 
            look-controls="pointerLockEnabled: true"
            touch-listener>
              <a-cursor 
                material="" 
                raycaster="objects: .raycastable"
                geometry="" 
                position="0 0 -0.1"      
                scale="0.1 0.1 0.1"/>
              <a-entity
              id="fadeBackground"
              geometry="primitive: sphere; radius: 2.5"
              material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible="false">
            </a-entity>
          </a-entity>
      </a-entity>

      <!-- Checkpoint -->
        <a-cylinder checkpoint radius="0.5" height="0.01" position="0 0 -20" color="#39BB82"></a-cylinder>
        <a-cylinder checkpoint radius="0.5" height="0.01" position="0 0 -16" color="#39BB82"></a-cylinder>
        <a-cylinder checkpoint radius="0.5" height="0.01" position="0 0 -12" color="#39BB82"></a-cylinder>
        <a-cylinder checkpoint radius="0.5" height="0.01" position="0 0 -8" color="#39BB82"></a-cylinder>

      <!-- Hand controls -->
      <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .raycastable"></a-entity>
      <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .raycastable" line="color: #118A7E"></a-entity>

      <a-entity id="ui" position="0 1.6 -2.5">
        <!-- Poster menu -->
        <a-entity id="menu" highlight>
          <a-entity id="karigurashiButton" position="-0.8 0 0" mixin="frame" class="raycastable menu-button">
            <a-entity material="src: #karigurashiPoster;" mixin="poster"></a-entity>
          </a-entity>

          <a-entity id="howardButton" position="0 0 0" mixin="frame" class="raycastable menu-button">
            <a-entity material="src: #howardPoster" mixin="poster"></a-entity>
          </a-entity>

          <a-entity id="ponyoButton" position="0.8 0 0" mixin="frame" class="raycastable menu-button">
            <a-entity material="src: #ponyoPoster" mixin="poster"></a-entity>
          </a-entity>
        </a-entity>


        



        <!-- Info panel of the selected Poster. -->
        <a-entity
          id="infoPanel"
          position="0 0 0.5"
          info-panel
          visible="false"
          scale="0.001 0.001 0.001"
          geometry="primitive: plane; width: 1.5; height: 1.8"
          material="color: #333333; shader: flat; transparent: false" class="raycastable">
          <a-entity id="ponyoImage" mixin="Image" material="src: #ponyo" visible="false"></a-entity>
          <a-entity id="howardImage" mixin="Image" material="src: #howard" visible="false"></a-entity>
          <a-entity id="karigurashiImage" mixin="Image" material="src: #karigurashi" visible="false"></a-entity>
          <a-entity id="Title"
            position="-0.68 -0.1 0"
            text="shader: msdf; anchor: left; width: 1.5; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: [LIMEN EXHIBITION SPEAKER]"></a-entity>
          <a-entity id="Description"
            position="-0.68 -0.2 0"
            text="baseline: top; shader: msdf; anchor: left; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: LIMEN EXHIBITION SPEAKER DESCRIPTION."></a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
   
  </body>
</html>